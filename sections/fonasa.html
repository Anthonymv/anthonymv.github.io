<!-- header -->
<div id="header"></div>

<!-- contenido del dashboard -->
<section class="container py-5" style="background-color: #f8f9fa;">
  <h2 class="fw-bold text-center text-primary mb-4">Distribución de Beneficiarios Fonasa 2024</h2>

  <!-- Botón para volver a BI -->
  <div class="text-center mb-4">
    <a href="/index.html?view=bi" class="btn btn-outline-primary">🔙 Volver a Soluciones BI</a>
  </div>

  <!-- Selector de tamaño responsivo -->
  <div class="text-center mb-3">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-sm btn-outline-secondary active" onclick="resizeIframe('desktop')">Escritorio</button>
      <button type="button" class="btn btn-sm btn-outline-secondary" onclick="resizeIframe('tablet')">Tablet</button>
      <button type="button" class="btn btn-sm btn-outline-secondary" onclick="resizeIframe('mobile')">Móvil</button>
    </div>
  </div>

  <!-- Embed Tableau con iframe responsivo -->
  <div class="d-flex justify-content-center">
    <div class="shadow-lg rounded overflow-hidden bg-white" style="width: 100%; max-width: 1200px;">
      <div class="ratio ratio-16x9">
        <iframe 
          id="tableauViz"
          src="https://public.tableau.com/views/Fonasa_17451793210550/Dashboard1?:embed=true&:language=es-ES&:display_count=y&:showVizHome=no&:toolbar=yes&:toolbar=bottom&:animate_transition=yes"
          frameborder="0" 
          allowfullscreen>
        </iframe>
      </div>
    </div>
  </div>

  <!-- Estadísticas destacadas -->
  <div class="row justify-content-center mt-4">
    <div class="col-md-8">
      <div class="card border-primary">
        <div class="card-body text-center">
          <h5 class="card-title">Distribución por Sexo - Fonasa 2024</h5>
          <div class="d-flex justify-content-around flex-wrap">
            <span class="badge bg-pink text-white p-2 m-1">Mujer: 52,15%</span>
            <span class="badge bg-blue text-white p-2 m-1">Hombre: 47,85%</span>
            <span class="badge bg-secondary text-white p-2 m-1">Indeterminado: 0,01%</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- footer -->
<div id="footer"></div>

<!-- script para cargar header y footer -->
<script src="/assets/js/load-sections.js"></script>

<!-- Script para control responsivo -->
<script>
  function resizeIframe(size) {
    const iframe = document.getElementById('tableauViz');
    const container = iframe.parentElement.parentElement;
    
    switch(size) {
      case 'desktop':
        container.style.maxWidth = '1200px';
        iframe.parentElement.className = 'ratio ratio-16x9';
        break;
      case 'tablet':
        container.style.maxWidth = '800px';
        iframe.parentElement.className = 'ratio ratio-4x3';
        break;
      case 'mobile':
        container.style.maxWidth = '100%';
        iframe.parentElement.className = 'ratio ratio-9x16';
        break;
    }
    
    // Actualizar botones activos
    document.querySelectorAll('.btn-group button').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.classList.add('active');
  }
</script>

<style>
  .bg-pink { background-color: #e83e8c; }
  .bg-blue { background-color: #007bff; }
  .shadow-lg { box-shadow: 0 1rem 3rem rgba(0,0,0,.175)!important; }
</style>